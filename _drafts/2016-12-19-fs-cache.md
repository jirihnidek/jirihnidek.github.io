---
title: FS Cache
layout: post
---

FS Cache is persistent local cache of file system mounter over network (typically using NFS). It can minimize network traffic. When network bandwidth is low or delay between server and host is hight it can also improve performance.

When you use NFS share and you want to improve performace with FS Cache, then you need not to do any changes at NFS server. All you have to do is prepare some disk partition (new and empty is the best) for caching and install caching daemon called: `cachefilesd`

When you use RedHat 7 or CentOS 7, then you can install `cachefilesd` using following command:

    $ yum -y install cachefilesd

Configuration
=============

You can use existing disk partition for caching, but it is recommended to use special partition only for caching. The first reason is a little bit better performance and the second is no need to set up cache cull limits.

The partition used for caching has to support extended attributes, because it is used for storing coherence maintenance information. Following file systems support extended attributes y default: ext4, xfs, btrfs. When you prefer to use ext3, then extended attributes has to be enabled:

    $ tune2fs -o user_xattr /dev/device  # ext3 only

To format some empty partition using e.g. ext4 you have to type following command:

    $ mkfs.ext4 /dev/device

Then you can mount new formated partition to some directory. We will used it for caching of FS Cache and default directory used for caching is `/var/cache/fscache`. So we can use this directory as mount point. When you will use different mount point, then you will have to change recored in configuration file of `cachefilesd`. Configuration file contains by default something like this:

